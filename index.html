<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>بطولة رمضان</title>

<style>
body{
margin:0;
font-family:Tahoma,Arial;
background:#0b132b;
color:#fff;
padding:20px;
}

h1{
text-align:center;
margin-bottom:20px;
}

.section{
background:#1c2541;
padding:15px;
border-radius:12px;
margin-bottom:20px;
}

table{
width:100%;
border-collapse:collapse;
margin-top:10px;
}

th,td{
padding:8px;
text-align:center;
border-bottom:1px solid #2e3b5f;
}

th{
background:#3a506b;
}

input{
width:60px;
padding:5px;
text-align:center;
border-radius:6px;
border:none;
}

.rank{
font-weight:bold;
color:#ffd166;
}
</style>
</head>

<body>

<h1>بطولة رمضان ⚽</h1>

<div class="section">
<h2>جدول الترتيب</h2>
<table>
<thead>
<tr>
<th>#</th>
<th>الفريق</th>
<th>P</th>
<th>W</th>
<th>D</th>
<th>L</th>
<th>GF</th>
<th>GA</th>
<th>GD</th>
<th>Pts</th>
</tr>
</thead>
<tbody id="standings"></tbody>
</table>
</div>

<div class="section">
<h2>المباريات</h2>
<div id="matches"></div>
</div>

<script>

const matchesData = [
{a:"اولاد حبيشي للجبس", b:"كافيه ايطاليانو"},
{a:"البودي", b:"ابو ملاك للموتسيكلات"},
{a:"أصدقاء مصطفي الشحات", b:"محمد حسن"},
{a:"أصدقاء الفخراني", b:"كافيه ايطاليانو"},
{a:"ابو ملاك للموتسيكلات", b:"اولاد حبيشي للجبس"},
{a:"البودي", b:"محمد حسن"},
{a:"أصدقاء مصطفي الشحات", b:"كافيه ايطاليانو"},
{a:"ابو ملاك للموتسيكلات", b:"أصدقاء الفخراني"},
{a:"محمد حسن", b:"اولاد حبيشي للجبس"},
{a:"البودي", b:"كافيه ايطاليانو"},
{a:"أصدقاء مصطفي الشحات", b:"أصدقاء الفخراني"},
{a:"ابو ملاك للموتسيكلات", b:"محمد حسن"},
{a:"اولاد حبيشي للجبس", b:"البودي"},
{a:"كافيه ايطاليانو", b:"ابو ملاك للموتسيكلات"},
{a:"أصدقاء الفخراني", b:"محمد حسن"},
{a:"البودي", b:"أصدقاء مصطفي الشحات"},
{a:"اولاد حبيشي للجبس", b:"أصدقاء الفخراني"},
{a:"ابو ملاك للموتسيكلات", b:"أصدقاء مصطفي الشحات"},
{a:"محمد حسن", b:"كافيه ايطاليانو"},
{a:"أصدقاء الفخراني", b:"البودي"},
{a:"اولاد حبيشي للجبس", b:"أصدقاء مصطفي الشحات"},
];

const KEY="ramadan_scores";

function load(){
return JSON.parse(localStorage.getItem(KEY)||"{}");
}

function save(data){
localStorage.setItem(KEY,JSON.stringify(data));
}

const scores=load();

function renderMatches(){
const container=document.getElementById("matches");
container.innerHTML="";
matchesData.forEach((m,i)=>{
const key="m"+i;
const s=scores[key]||{a:"",b:""};
container.innerHTML+=`
<div style="margin-bottom:10px">
${m.a}
<input type="number" value="${s.a}" data-i="${i}" data-side="a">
-
<input type="number" value="${s.b}" data-i="${i}" data-side="b">
${m.b}
</div>
`;
});
}

function calculateStandings(){

const teams={};

matchesData.forEach(m=>{
if(!teams[m.a]) teams[m.a]={P:0,W:0,D:0,L:0,GF:0,GA:0,Pts:0};
if(!teams[m.b]) teams[m.b]={P:0,W:0,D:0,L:0,GF:0,GA:0,Pts:0};
});

matchesData.forEach((m,i)=>{
const key="m"+i;
const s=scores[key];
if(!s || s.a==="" || s.b==="") return;

const a=Number(s.a);
const b=Number(s.b);

teams[m.a].P++;
teams[m.b].P++;

teams[m.a].GF+=a;
teams[m.a].GA+=b;
teams[m.b].GF+=b;
teams[m.b].GA+=a;

if(a>b){
teams[m.a].W++;
teams[m.b].L++;
teams[m.a].Pts+=3;
}
else if(a<b){
teams[m.b].W++;
teams[m.a].L++;
teams[m.b].Pts+=3;
}
else{
teams[m.a].D++;
teams[m.b].D++;
teams[m.a].Pts+=1;
teams[m.b].Pts+=1;
}
});

const arr=Object.keys(teams).map(name=>{
const t=teams[name];
return {
name,
...t,
GD:t.GF-t.GA
};
});

arr.sort((x,y)=>{
if(y.Pts!==x.Pts) return y.Pts-x.Pts;
if(y.GD!==x.GD) return y.GD-x.GD;
return y.GF-x.GF;
});

const tbody=document.getElementById("standings");
tbody.innerHTML="";
arr.forEach((t,i)=>{
tbody.innerHTML+=`
<tr>
<td class="rank">${i+1}</td>
<td>${t.name}</td>
<td>${t.P}</td>
<td>${t.W}</td>
<td>${t.D}</td>
<td>${t.L}</td>
<td>${t.GF}</td>
<td>${t.GA}</td>
<td>${t.GD}</td>
<td>${t.Pts}</td>
</tr>
`;
});
}

document.addEventListener("input",e=>{
if(e.target.tagName!=="INPUT") return;
const i=e.target.dataset.i;
const side=e.target.dataset.side;
const key="m"+i;
scores[key]=scores[key]||{a:"",b:""};
scores[key][side]=e.target.value;
save(scores);
calculateStandings();
});

renderMatches();
calculateStandings();

</script>

</body>
</html>
